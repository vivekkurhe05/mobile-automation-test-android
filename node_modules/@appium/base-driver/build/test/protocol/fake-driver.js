"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FakeDriver = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

require("source-map-support/register");

var _lib = require("../../lib");

var _constants = require("../../lib/constants");

var _support = require("@appium/support");

class FakeDriver extends _lib.BaseDriver {
  constructor() {
    super();
    this.protocol = _constants.PROTOCOLS.MJSONWP;
    this.sessionId = null;
    this.jwpProxyActive = false;
  }

  sessionExists(sessionId) {
    if (!sessionId) {
      return false;
    }

    return sessionId === this.sessionId;
  }

  driverForSession() {
    return this;
  }

  async createSession(desiredCapabilities, requiredCapabilities, capabilities) {
    this.sessionId = `fakeSession_${_support.util.uuidV4()}`;
    return [this.sessionId, capabilities];
  }

  async executeCommand(cmd, ...args) {
    if (!this[cmd]) {
      throw new _lib.errors.NotYetImplementedError();
    }

    if (cmd === 'createSession') {
      this.protocol = (0, _lib.determineProtocol)(...args);
    }

    return await this[cmd](...args);
  }

  async deleteSession() {
    this.jwpProxyActive = false;
    this.sessionId = null;
  }

  async getStatus() {
    return "I'm fine";
  }

  async setUrl(url) {
    return `Navigated to: ${url}`;
  }

  async getUrl() {
    return 'http://foobar.com';
  }

  async back(sessionId) {
    return sessionId;
  }

  async forward() {}

  async refresh() {
    throw new Error('Too Fresh!');
  }

  async getSession() {
    throw new _lib.errors.NoSuchDriverError();
  }

  async click(elementId, sessionId) {
    return [elementId, sessionId];
  }

  async implicitWait(ms) {
    return ms;
  }

  async clickCurrent(button) {
    return button;
  }

  async setNetworkConnection(type) {
    return type;
  }

  async moveTo(element, xOffset, yOffset) {
    return [element, xOffset, yOffset];
  }

  async getText() {
    return '';
  }

  async getAttribute(attr, elementId, sessionId) {
    return [attr, elementId, sessionId];
  }

  async setValue(value, elementId) {
    return [value, elementId];
  }

  async performTouch(...args) {
    return args;
  }

  async setFrame(frameId) {
    return frameId;
  }

  async removeApp(app) {
    return app;
  }

  async receiveAsyncResponse() {
    return {
      status: 13,
      value: 'Mishandled Driver Error'
    };
  }

  proxyActive() {
    return false;
  }

  getProxyAvoidList() {
    return [];
  }

  canProxy() {
    return false;
  }

  async notProxiedCommand() {
    return 'This was not proxied';
  }

}

exports.FakeDriver = FakeDriver;
(0, _defineProperty2.default)(FakeDriver, "newMethodMap", {
  '/session/:sessionId/noproxy': {
    GET: {
      command: 'notProxiedCommand',
      neverProxy: true
    }
  }
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvcHJvdG9jb2wvZmFrZS1kcml2ZXIuanMiXSwibmFtZXMiOlsiRmFrZURyaXZlciIsIkJhc2VEcml2ZXIiLCJjb25zdHJ1Y3RvciIsInByb3RvY29sIiwiUFJPVE9DT0xTIiwiTUpTT05XUCIsInNlc3Npb25JZCIsImp3cFByb3h5QWN0aXZlIiwic2Vzc2lvbkV4aXN0cyIsImRyaXZlckZvclNlc3Npb24iLCJjcmVhdGVTZXNzaW9uIiwiZGVzaXJlZENhcGFiaWxpdGllcyIsInJlcXVpcmVkQ2FwYWJpbGl0aWVzIiwiY2FwYWJpbGl0aWVzIiwidXRpbCIsInV1aWRWNCIsImV4ZWN1dGVDb21tYW5kIiwiY21kIiwiYXJncyIsImVycm9ycyIsIk5vdFlldEltcGxlbWVudGVkRXJyb3IiLCJkZWxldGVTZXNzaW9uIiwiZ2V0U3RhdHVzIiwic2V0VXJsIiwidXJsIiwiZ2V0VXJsIiwiYmFjayIsImZvcndhcmQiLCJyZWZyZXNoIiwiRXJyb3IiLCJnZXRTZXNzaW9uIiwiTm9TdWNoRHJpdmVyRXJyb3IiLCJjbGljayIsImVsZW1lbnRJZCIsImltcGxpY2l0V2FpdCIsIm1zIiwiY2xpY2tDdXJyZW50IiwiYnV0dG9uIiwic2V0TmV0d29ya0Nvbm5lY3Rpb24iLCJ0eXBlIiwibW92ZVRvIiwiZWxlbWVudCIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwiZ2V0VGV4dCIsImdldEF0dHJpYnV0ZSIsImF0dHIiLCJzZXRWYWx1ZSIsInZhbHVlIiwicGVyZm9ybVRvdWNoIiwic2V0RnJhbWUiLCJmcmFtZUlkIiwicmVtb3ZlQXBwIiwiYXBwIiwicmVjZWl2ZUFzeW5jUmVzcG9uc2UiLCJzdGF0dXMiLCJwcm94eUFjdGl2ZSIsImdldFByb3h5QXZvaWRMaXN0IiwiY2FuUHJveHkiLCJub3RQcm94aWVkQ29tbWFuZCIsIkdFVCIsImNvbW1hbmQiLCJuZXZlclByb3h5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsTUFBTUEsVUFB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ZixTQUFSLENBQVA7QUFDRDs7QUFFaUIsUUFBWmdCLFlBQVksQ0FBRSxHQUFHL0IsSUFBTCxFQUFXO0FBQzNCLFdBQU9BLElBQVA7QUFDRDs7QUFFYSxRQUFSZ0MsUUFBUSxDQUFFQyxPQUFGLEVBQVc7QUFDdkIsV0FBT0EsT0FBUDtBQUNEOztBQUVjLFFBQVRDLFNBQVMsQ0FBRUMsR0FBRixFQUFPO0FBQ3BCLFdBQU9BLEdBQVA7QUFDRDs7QUFFeUIsUUFBcEJDLG9CQUFvQixHQUFJO0FBRTVCLFdBQU87QUFBQ0MsTUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYVAsTUFBQUEsS0FBSyxFQUFFO0FBQXBCLEtBQVA7QUFDRDs7QUFFRFEsRUFBQUEsV0FBVyxHQUFpQjtBQUMxQixXQUFPLEtBQVA7QUFDRDs7QUFFREMsRUFBQUEsaUJBQWlCLEdBQWlCO0FBQ2hDLFdBQU8sRUFBUDtBQUNEOztBQUVEQyxFQUFBQSxRQUFRLEdBQWlCO0FBQ3ZCLFdBQU8sS0FBUDtBQUNEOztBQUVzQixRQUFqQkMsaUJBQWlCLEdBQUk7QUFDekIsV0FBTyxzQkFBUDtBQUNEOztBQXhJaUM7Ozs4QkFBOUIzRCxVLGtCQUVrQjtBQUNwQixpQ0FBK0I7QUFDN0I0RCxJQUFBQSxHQUFHLEVBQUU7QUFBQ0MsTUFBQUEsT0FBTyxFQUFFLG1CQUFWO0FBQStCQyxNQUFBQSxVQUFVLEVBQUU7QUFBM0M7QUFEd0I7QUFEWCxDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1hd2FpdCAqL1xuaW1wb3J0IHsgZXJyb3JzLCBCYXNlRHJpdmVyLCBkZXRlcm1pbmVQcm90b2NvbCB9IGZyb20gJy4uLy4uL2xpYic7XG5pbXBvcnQgeyBQUk9UT0NPTFMgfSBmcm9tICcuLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuXG5cbmNsYXNzIEZha2VEcml2ZXIgZXh0ZW5kcyBCYXNlRHJpdmVyIHtcblxuICBzdGF0aWMgbmV3TWV0aG9kTWFwID0ge1xuICAgICcvc2Vzc2lvbi86c2Vzc2lvbklkL25vcHJveHknOiB7XG4gICAgICBHRVQ6IHtjb21tYW5kOiAnbm90UHJveGllZENvbW1hbmQnLCBuZXZlclByb3h5OiB0cnVlfVxuICAgIH1cbiAgfTtcblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnByb3RvY29sID0gUFJPVE9DT0xTLk1KU09OV1A7XG4gICAgdGhpcy5zZXNzaW9uSWQgPSBudWxsO1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIHNlc3Npb25FeGlzdHMgKHNlc3Npb25JZCkge1xuICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzZXNzaW9uSWQgPT09IHRoaXMuc2Vzc2lvbklkO1xuICB9XG5cbiAgZHJpdmVyRm9yU2Vzc2lvbiAoLypzZXNzaW9uSWQqLykge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbiAoZGVzaXJlZENhcGFiaWxpdGllcywgcmVxdWlyZWRDYXBhYmlsaXRpZXMsIGNhcGFiaWxpdGllcykge1xuICAgIC8vIFVzZSBhIGNvdW50ZXIgdG8gbWFrZSBzdXJlIGVhY2ggc2Vzc2lvbiBoYXMgYSB1bmlxdWUgaWRcbiAgICB0aGlzLnNlc3Npb25JZCA9IGBmYWtlU2Vzc2lvbl8ke3V0aWwudXVpZFY0KCl9YDtcbiAgICByZXR1cm4gW3RoaXMuc2Vzc2lvbklkLCBjYXBhYmlsaXRpZXNdO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUNvbW1hbmQgKGNtZCwgLi4uYXJncykge1xuICAgIGlmICghdGhpc1tjbWRdKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdFlldEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9XG4gICAgaWYgKGNtZCA9PT0gJ2NyZWF0ZVNlc3Npb24nKSB7XG4gICAgICB0aGlzLnByb3RvY29sID0gZGV0ZXJtaW5lUHJvdG9jb2woLi4uYXJncyk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzW2NtZF0oLi4uYXJncyk7XG4gIH1cblxuICBhc3luYyBkZWxldGVTZXNzaW9uICgpIHtcbiAgICB0aGlzLmp3cFByb3h5QWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5zZXNzaW9uSWQgPSBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0U3RhdHVzICgpIHtcbiAgICByZXR1cm4gXCJJJ20gZmluZVwiO1xuICB9XG5cbiAgYXN5bmMgc2V0VXJsICh1cmwpIHtcbiAgICByZXR1cm4gYE5hdmlnYXRlZCB0bzogJHt1cmx9YDtcbiAgfVxuXG4gIGFzeW5jIGdldFVybCAoKSB7XG4gICAgcmV0dXJuICdodHRwOi8vZm9vYmFyLmNvbSc7XG4gIH1cblxuICBhc3luYyBiYWNrIChzZXNzaW9uSWQpIHtcbiAgICByZXR1cm4gc2Vzc2lvbklkO1xuICB9XG5cbiAgYXN5bmMgZm9yd2FyZCAoKSB7fVxuXG4gIGFzeW5jIHJlZnJlc2ggKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVG9vIEZyZXNoIScpO1xuICB9XG5cbiAgYXN5bmMgZ2V0U2Vzc2lvbiAoKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob1N1Y2hEcml2ZXJFcnJvcigpO1xuICB9XG5cbiAgYXN5bmMgY2xpY2sgKGVsZW1lbnRJZCwgc2Vzc2lvbklkKSB7XG4gICAgcmV0dXJuIFtlbGVtZW50SWQsIHNlc3Npb25JZF07XG4gIH1cblxuICBhc3luYyBpbXBsaWNpdFdhaXQgKG1zKSB7XG4gICAgcmV0dXJuIG1zO1xuICB9XG5cbiAgYXN5bmMgY2xpY2tDdXJyZW50IChidXR0b24pIHtcbiAgICByZXR1cm4gYnV0dG9uO1xuICB9XG5cbiAgYXN5bmMgc2V0TmV0d29ya0Nvbm5lY3Rpb24gKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIGFzeW5jIG1vdmVUbyAoZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldCkge1xuICAgIHJldHVybiBbZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldF07XG4gIH1cblxuICBhc3luYyBnZXRUZXh0ICgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBhc3luYyBnZXRBdHRyaWJ1dGUgKGF0dHIsIGVsZW1lbnRJZCwgc2Vzc2lvbklkKSB7XG4gICAgcmV0dXJuIFthdHRyLCBlbGVtZW50SWQsIHNlc3Npb25JZF07XG4gIH1cblxuICBhc3luYyBzZXRWYWx1ZSAodmFsdWUsIGVsZW1lbnRJZCkge1xuICAgIHJldHVybiBbdmFsdWUsIGVsZW1lbnRJZF07XG4gIH1cblxuICBhc3luYyBwZXJmb3JtVG91Y2ggKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIGFzeW5jIHNldEZyYW1lIChmcmFtZUlkKSB7XG4gICAgcmV0dXJuIGZyYW1lSWQ7XG4gIH1cblxuICBhc3luYyByZW1vdmVBcHAgKGFwcCkge1xuICAgIHJldHVybiBhcHA7XG4gIH1cblxuICBhc3luYyByZWNlaXZlQXN5bmNSZXNwb25zZSAoKSB7XG4gICAgLy8gdGhpcyBpcyBoZXJlIHRvIHRlc3QgYSBmYWlsaW5nIGNvbW1hbmQgdGhhdCBkb2VzIG5vdCB0aHJvdyBhbiBlcnJvclxuICAgIHJldHVybiB7c3RhdHVzOiAxMywgdmFsdWU6ICdNaXNoYW5kbGVkIERyaXZlciBFcnJvcid9O1xuICB9XG5cbiAgcHJveHlBY3RpdmUgKC8qc2Vzc2lvbklkKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRQcm94eUF2b2lkTGlzdCAoLypzZXNzaW9uSWQqLykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNhblByb3h5ICgvKnNlc3Npb25JZCovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgbm90UHJveGllZENvbW1hbmQgKCkge1xuICAgIHJldHVybiAnVGhpcyB3YXMgbm90IHByb3hpZWQnO1xuICB9XG59XG5cbmV4cG9ydCB7IEZha2VEcml2ZXIgfTtcbiJdLCJmaWxlIjoidGVzdC9wcm90b2NvbC9mYWtlLWRyaXZlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
